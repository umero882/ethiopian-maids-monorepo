{"version":3,"file":"webhookHandler.js","sourceRoot":"","sources":["../../src/stripe/webhookHandler.ts"],"names":[],"mappings":"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"}